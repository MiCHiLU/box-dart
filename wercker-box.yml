name: dart
version: 0.0.1-dev1
inherits: wercker/ubuntu12.04-webessentials@0.0.11
type: main
platform: ubuntu@12.04
description: "A box create to build, test and deploy Dart applications"
scr
    cd $HOME

    # Install Dart SDK
    wget "https://storage.googleapis.com/dart-editor-archive-integration/latest/dartsdk-linux-64.tar.gz"
    tar zvxf  dartsdk-linux-64.tar.gz

    # Assert dart_sdk directory
    test -d $HOME/dart-sdk || { echo "$(ls -a $HOME)" ; echo "dart-sdk directory not found at $HOME/dart_sdk, terminating."; exit 1; }

    # Write environment variables
    echo 'export DART_SDK="$HOME/dart-sdk' >> $HOME/.bash_profile
    echo 'export PATH="$PATH:$DART_SDK/bin' >> $HOME/.bash_profile

    # Update environment variables
    source $HOME/.bash_profile

    # Assert dart command
    type dart || { echo "PATH: $PATH"; echo "dart command not availble after installation, terminating."; exit 1; }